<!DOCTYPE html>
<html>
<head>
    <title>Urban Sim: Neon City</title>
    <style>
        :root { --neon: #00ff88; --bg: #0a0a12; }
        body { margin: 0; overflow: hidden; background: var(--bg); font-family: 'Segoe UI', sans-serif; }
        
        /* SLEEK HUD */
        #hud { position: absolute; top: 20px; left: 20px; color: white; background: rgba(0, 0, 0, 0.6); 
               padding: 20px; border-radius: 10px; border: 1px solid var(--neon); pointer-events: none; }
        #money { font-size: 32px; color: var(--neon); font-weight: bold; }
        
        #shop { position: absolute; top: 20px; right: 20px; display: flex; flex-direction: column; gap: 10px; }
        .buy-btn { background: rgba(0,255,136,0.1); color: var(--neon); border: 1px solid var(--neon); 
                   padding: 10px 20px; border-radius: 5px; cursor: pointer; transition: 0.3s; }
        .buy-btn:hover { background: var(--neon); color: black; }
    </style>
</head>
<body>

    <div id="hud">
        <div id="money">$ 0</div>
        <div style="font-size: 12px; opacity: 0.8;">CITY STATUS: ENTREPRENEUR</div>
    </div>

    <div id="shop">
        <button class="buy-btn" onclick="buyBuilding()">BUY BUILDING ($50)</button>
    </div>

    <script type="importmap">
        { "imports": { "three": "https://unpkg.com/three@0.160.0/build/three.module.js" } }
    </script>

    <script type="module">
        import * as THREE from 'three';

        // --- SCENE SETUP ---
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0x0a0a12);

        // ISOMETRIC CAMERA
        const aspect = window.innerWidth / window.innerHeight;
        const d = 10;
        const camera = new THREE.OrthographicCamera(-d * aspect, d * aspect, d, -d, 1, 1000);
        camera.position.set(20, 20, 20);
        camera.lookAt(0, 0, 0);

        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        // --- LIGHTING ---
        scene.add(new THREE.AmbientLight(0x404040, 2));
        const sun = new THREE.DirectionalLight(0x00ff88, 1);
        sun.position.set(5, 10, 7);
        scene.add(sun);

        // --- WORLD ---
        const grid = new THREE.GridHelper(100, 50, 0x00ff88, 0x222222);
        scene.add(grid);

        // --- THE SIM ---
        const sim = new THREE.Group();
        const body = new THREE.Mesh(new THREE.BoxGeometry(0.8, 1.5, 0.8), new THREE.MeshStandardMaterial({color: 0x3333ff}));
        body.position.y = 0.75;
        sim.add(body);

        const plumbob = new THREE.Mesh(new THREE.OctahedronGeometry(0.3, 0), new THREE.MeshStandardMaterial({color: 0x00ff88, emissive: 0x00ff88}));
        plumbob.position.y = 2.2;
        sim.add(plumbob);
        scene.add(sim);

        // --- NEON BUILDINGS FUNCTION ---
        window.buyBuilding = () => {
            if(money < 50) return;
            money -= 50;
            updateUI();
            
            const h = Math.random() * 6 + 3;
            const bGeo = new THREE.BoxGeometry(3, h, 3);
            const bMat = new THREE.MeshStandardMaterial({ color: 0x111111 });
            const building = new THREE.Mesh(bGeo, bMat);
            
            building.position.set(Math.random() * 30 - 15, h/2, Math.random() * 30 - 15);
            scene.add(building);

            // Add Neon Windows
            const winGeo = new THREE.PlaneGeometry(0.5, 0.3);
            const winMat = new THREE.MeshBasicMaterial({ color: 0x00ff88 });
            for(let i = 0; i < 5; i++) {
                const win = new THREE.Mesh(winGeo, winMat);
                win.position.set(1.51, Math.random() * h, Math.random() * 2 - 1);
                win.rotation.y = Math.PI / 2;
                building.add(win);
            }
        };

        // --- LOGIC ---
        let money = 0;
        let target = new THREE.Vector3(0,0,0);
        const raycaster = new THREE.Raycaster();
        const mouse = new THREE.Vector2();

        window.addEventListener('mousedown', (e) => {
            mouse.x = (e.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(e.clientY / window.innerHeight) * 2 + 1;
            raycaster.setFromCamera(mouse, camera);
            const hits = raycaster.intersectObject(grid);
            
            if(hits.length > 0) {
                target.copy(hits[0].point);
                // clicking gives a little money too
                money += 1;
                updateUI();
            }
        });

        function updateUI() {
            document.getElementById('money').innerText = "$ " + money;
        }

        function animate() {
            requestAnimationFrame(animate);
            sim.position.lerp(new THREE.Vector3(target.x, 0, target.z), 0.1);
            plumbob.rotation.y += 0.05;
            renderer.render(scene, camera);
        }
        animate();
    </script>
</body>
</html>
